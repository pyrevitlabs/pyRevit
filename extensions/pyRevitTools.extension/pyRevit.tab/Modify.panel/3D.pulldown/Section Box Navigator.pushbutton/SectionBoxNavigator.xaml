<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Section Box Navigator" Height="670" Width="560" 
        ShowInTaskbar="False" Topmost="True"
        ScrollViewer.VerticalScrollBarVisibility="Disabled">
    <Window.Resources>
        <Style TargetType="Button">
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="Background" Value="#FFDDDDDD"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}" 
                                CornerRadius="5"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <!-- Hover -->
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#FFBEE6FD"/>
                            </Trigger>

                            <!-- Pressed -->
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#FFB0D8F9"/>
                            </Trigger>

                            <!-- Disabled -->
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Opacity" Value="0.5"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style TargetType="GroupBox">
            <Setter Property="BorderBrush" Value="#F0F0F0"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
    </Window.Resources>
    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Row 0: Controls -->
        
        <!-- Column 0: Level Navigation + View Alignment -->
        <Grid Grid.Row="0" Grid.Column="0" Margin="0,0,5,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <!-- Level Navigation Controls -->
            <GroupBox Grid.Row="0" Margin="0,0,0,10">
                <GroupBox.Header>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock>üè¢</TextBlock>
                        <TextBlock FontWeight="Bold" Margin="5,0,0,0">Level Navigation</TextBlock>
                    </StackPanel>
                </GroupBox.Header>
                <StackPanel Margin="5">
                    <!-- Navigation Buttons -->
                    <Grid Margin="0,0,0,5">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Top Controls -->
                        <Button Content="Top ‚Üë" Grid.Row="0" Grid.Column="0" 
                                Height="30" Margin="2" Click="btn_top_up_click" Tag="top-up"
                                MouseEnter="btn_preview_enter" MouseLeave="btn_preview_leave"/>
                        <Button Content="Top ‚Üì" Grid.Row="0" Grid.Column="1" 
                                Height="30" Margin="2" Click="btn_top_down_click" Tag="top-down"
                                MouseEnter="btn_preview_enter" MouseLeave="btn_preview_leave"/>

                        <!-- Bottom Controls -->
                        <Button Content="Bottom ‚Üë" Grid.Row="1" Grid.Column="0" 
                                Height="30" Margin="2" Click="btn_bottom_up_click" Tag="bottom-up"
                                MouseEnter="btn_preview_enter" MouseLeave="btn_preview_leave"/>
                        <Button Content="Bottom ‚Üì" Grid.Row="1" Grid.Column="1" 
                                Height="30" Margin="2" Click="btn_bottom_down_click" Tag="bottom-down"
                                MouseEnter="btn_preview_enter" MouseLeave="btn_preview_leave"/>

                        <!-- Box Navigation -->
                        <Button Content="Box ‚Üë" Grid.Row="2" Grid.Column="0" 
                                Height="30" Margin="2" Click="btn_box_up_click" Tag="box-up"
                                MouseEnter="btn_preview_enter" MouseLeave="btn_preview_leave"/>
                        <Button Content="Box ‚Üì" Grid.Row="2" Grid.Column="1" 
                                Height="30" Margin="2" Click="btn_box_down_click" Tag="box-down"
                                MouseEnter="btn_preview_enter" MouseLeave="btn_preview_leave"/>
                    </Grid>

                    <!-- Mode Selection Radio Buttons -->
                    <StackPanel Orientation="Horizontal" Margin="0,5,0,5" HorizontalAlignment="Center">
                        <RadioButton x:Name="rbLevel" Content="Level" 
                                    GroupName="LevelNudgeMode" IsChecked="True" Margin="0,0,15,0"/>
                        <RadioButton x:Name="rbLevelNudge" Content="Nudge" 
                                    GroupName="LevelNudgeMode" Margin="0,0,0,0"/>
                    </StackPanel>

                    <!-- Nudge Amount Input (for Nudge mode) -->
                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Amount:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                        <TextBox x:Name="txtLevelNudgeAmount" Grid.Column="1" 
                                Text="500" Height="25" VerticalContentAlignment="Center"/>
                        <TextBlock x:Name="txtLevelNudgeUnit" Grid.Column="2" 
                                Text="Loading..." VerticalAlignment="Center" Margin="5,0,0,0"/>
                    </Grid>
                </StackPanel>
            </GroupBox>

            <!-- 2D View alignment-->
            <GroupBox Grid.Row="1" Margin="0,0,0,0">
                <GroupBox.Header>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock>üìê</TextBlock>
                        <TextBlock FontWeight="Bold" Margin="5,0,0,0">View alignment</TextBlock>
                    </StackPanel>
                </GroupBox.Header>
                <Button x:Name="btnAlignToView" Content="Align 2D View" 
                        Margin="5" Click="btn_align_box_to_view_click"/>
            </GroupBox>
        </Grid>

        <!-- Column 1: Grid Navigation + Expand/Shrink -->
        <Grid Grid.Row="0" Grid.Column="1" Margin="5,0,0,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <!-- Grid Navigation -->
            <GroupBox Grid.Row="0" Margin="0,0,0,10">
                <GroupBox.Header>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock>‚ñ¶</TextBlock>
                        <TextBlock FontWeight="Bold" Margin="5,0,0,0">Grid Navigation</TextBlock>
                    </StackPanel>
                </GroupBox.Header>
                <StackPanel Margin="5">
                    <!-- Direction Buttons in Grid Layout -->
                    <Grid Margin="0,0,0,5">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Text="Bigger"
                                Grid.Row="0" Grid.Column="0"
                                VerticalAlignment="Center"
                                Margin="0,0,5,0"/>
                        <!-- Top Row: W, N, S, E outward buttons -->
                        <Button Content="‚Üê W" Grid.Row="0" Grid.Column="1" 
                                Height="30" Margin="1" Click="btn_grid_west_out_click" Tag="west-out"
                                MouseEnter="btn_preview_enter" MouseLeave="btn_preview_leave"/>
                        <Button Content="‚Üë N" Grid.Row="0" Grid.Column="2" 
                                Height="30" Margin="1" Click="btn_grid_north_out_click" Tag="north-out"
                                MouseEnter="btn_preview_enter" MouseLeave="btn_preview_leave"/>
                        <Button Content="‚Üì S" Grid.Row="0" Grid.Column="3" 
                                Height="30" Margin="1" Click="btn_grid_south_out_click" Tag="south-out"
                                MouseEnter="btn_preview_enter" MouseLeave="btn_preview_leave"/>
                        <Button Content="‚Üí E" Grid.Row="0" Grid.Column="4" 
                                Height="30" Margin="1" Click="btn_grid_east_out_click" Tag="east-out"
                                MouseEnter="btn_preview_enter" MouseLeave="btn_preview_leave"/>

                        <TextBlock Text="Smaller"
                                Grid.Row="1" Grid.Column="0"
                                VerticalAlignment="Center"
                                Margin="0,0,5,0"/>
                        <!-- Bottom Row: W, N, S, E inward buttons -->
                        <Button Content="‚Üí W" Grid.Row="1" Grid.Column="1" 
                                Height="30" Margin="1" Click="btn_grid_west_in_click" Tag="west-in"
                                MouseEnter="btn_preview_enter" MouseLeave="btn_preview_leave"/>
                        <Button Content="‚Üì N" Grid.Row="1" Grid.Column="2" 
                                Height="30" Margin="1" Click="btn_grid_north_in_click" Tag="north-in"
                                MouseEnter="btn_preview_enter" MouseLeave="btn_preview_leave"/>
                        <Button Content="‚Üë S" Grid.Row="1" Grid.Column="3" 
                                Height="30" Margin="1" Click="btn_grid_south_in_click" Tag="south-in"
                                MouseEnter="btn_preview_enter" MouseLeave="btn_preview_leave"/>
                        <Button Content="‚Üê E" Grid.Row="1" Grid.Column="4" 
                                Height="30" Margin="1" Click="btn_grid_east_in_click" Tag="east-in"
                                MouseEnter="btn_preview_enter" MouseLeave="btn_preview_leave"/>
                    </Grid>

                    <!-- Mode Selection Radio Buttons -->
                    <StackPanel Orientation="Horizontal" Margin="0,5,0,5" HorizontalAlignment="Center">
                        <RadioButton x:Name="rbGrid" Content="Grid" 
                                     GroupName="GridNudgeMode" IsChecked="True" Margin="0,0,15,0"/>
                        <RadioButton x:Name="rbGridNudge" Content="Nudge" 
                                     GroupName="GridNudgeMode" Margin="0,0,0,0"/>
                    </StackPanel>

                    <!-- Nudge Amount Input (for Nudge mode) -->
                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Amount:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                        <TextBox x:Name="txtGridNudgeAmount" Grid.Column="1" 
                                 Text="500" Height="25" VerticalContentAlignment="Center"/>
                        <TextBlock x:Name="txtGridNudgeUnit" Grid.Column="2" 
                                   Text="mm" VerticalAlignment="Center" Margin="5,0,0,0"/>
                    </Grid>
                </StackPanel>
            </GroupBox>

            <!-- Expansion Controls -->
            <GroupBox Grid.Row="1" Margin="0,0,0,10">
                <GroupBox.Header>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock>‚¨ç</TextBlock>
                        <TextBlock FontWeight="Bold" Margin="5,0,0,0">Expand/Shrink Controls</TextBlock>
                    </StackPanel>
                </GroupBox.Header>
                <StackPanel Margin="5">
                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Amount:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                        <TextBox x:Name="txtExpandAmount" Grid.Column="1" 
                                 Text="500" Height="25" VerticalContentAlignment="Center"/>
                        <TextBlock x:Name="txtExpandUnit" Grid.Column="2" 
                                   Text="Loading..." VerticalAlignment="Center" Margin="5,0,0,0"/>
                    </Grid>
                    
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Buttons -->
                        <Button Content="Expand +" Grid.Row="0" Grid.Column="0" 
                                Height="30" Margin="2" Click="btn_expansion_top_up_click" Tag="expand"
                                MouseEnter="btn_preview_enter" MouseLeave="btn_preview_leave"/>
                        <Button Content="Shrink -" Grid.Row="0" Grid.Column="1" 
                                Height="30" Margin="2" Click="btn_expansion_top_down_click" Tag="shrink"
                                MouseEnter="btn_preview_enter" MouseLeave="btn_preview_leave"/>
                    </Grid>
                </StackPanel>
            </GroupBox>
        </Grid>

        <!-- Row 1: Actions (full width) -->
        <GroupBox Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Margin="0,0,0,10">
            <GroupBox.Header>
                <TextBlock FontWeight="Bold">Actions</TextBlock>
            </GroupBox.Header>
            <UniformGrid Columns="3" Margin="5,0,5,2" HorizontalAlignment="Stretch">
                <Button x:Name="btnToggleBox" Content="Toggle Box" 
                        Margin="2" Click="btn_toggle_box_click" Tag="toggle"
                        MouseEnter="btn_preview_enter" MouseLeave="btn_preview_leave"/>
                <Button x:Name="btnHideBox" Content="(Un-)Hide Box" 
                        Margin="2" Click="btn_hide_box_click"/>
                <Button x:Name="btnAlignBoxToFace" Content="Align Box" 
                        Margin="2" Click="btn_align_box_to_face_click"/>
            </UniformGrid>
        </GroupBox>

        <!-- Row 2: Status Sections -->
        
        <!-- Column 0: Vertical Position Status -->
        <GroupBox Grid.Row="2" Grid.Column="0" Margin="0,0,5,10" VerticalAlignment="Stretch" Background="#F5F5F5">
            <GroupBox.Header>
                <TextBlock FontWeight="Bold">Vertical Position Status</TextBlock>
            </GroupBox.Header>
            <Grid Margin="5">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <StackPanel Grid.Row="0">
                    <TextBlock x:Name="project_unit_text" Text="" Visibility="Collapsed" Foreground="Red" FontWeight="Bold" Margin="0,5,0,2"/>
                    <TextBlock x:Name="txtTopLevelAbove" Text="Top: Loading..." Margin="0,2" FontSize="10"/>
                    <TextBlock x:Name="txtTopPosition" Text="Position: ..." Margin="0,2" Foreground="DarkBlue"/>
                    <TextBlock x:Name="txtTopLevelBelow" Text="Top: Loading..." Margin="0,2" FontSize="10"/>
                    <Separator Margin="0,2" />
                    <TextBlock x:Name="txtBottomLevelAbove" Text="Bottom: Loading..." Margin="0,2" FontSize="10"/>
                    <TextBlock x:Name="txtBottomPosition" Text="Position: ..." Margin="0,2" Foreground="DarkBlue"/>
                    <TextBlock x:Name="txtBottomLevelBelow" Text="Bottom: Loading..." Margin="0,2" FontSize="10"/>
                    <Separator Margin="0,2" />
                    <TextBlock x:Name="txtVerticalStatus" Text="" Margin="0,5,0,0" TextWrapping="Wrap" Foreground="Black"/>
                </StackPanel>
            </Grid>
        </GroupBox>

        <!-- Column 1: Grid Navigation Status + Expand/Shrink + Actions Status (each half height) -->
        <Grid Grid.Row="2" Grid.Column="1" Margin="5,0,0,10" VerticalAlignment="Stretch">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="5"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- Grid Navigation Status (top half) -->
            <GroupBox Grid.Row="0" VerticalAlignment="Stretch" Background="#F5F5F5">
                <GroupBox.Header>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock>‚ñ¶</TextBlock>
                        <TextBlock FontWeight="Bold" Margin="5,0,0,0">Grid Navigation Status</TextBlock>
                    </StackPanel>
                </GroupBox.Header>
                <Grid Margin="5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <TextBlock x:Name="txtGridStatus" Grid.Row="0" Text="-" Margin="0,2" TextWrapping="Wrap" Foreground="Black"/>
                </Grid>
            </GroupBox>

            <!-- Expand/Shrink + Actions Status (bottom half) -->
            <GroupBox Grid.Row="2" VerticalAlignment="Stretch" Background="#F5F5F5">
                <GroupBox.Header>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock>‚¨ç</TextBlock>
                        <TextBlock FontWeight="Bold" Margin="5,0,0,0">Expand/Shrink + Actions Status</TextBlock>
                    </StackPanel>
                </GroupBox.Header>
                <Grid Margin="5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <TextBlock x:Name="txtExpandActionsStatus" Grid.Row="0" Text="-" Margin="0,2" TextWrapping="Wrap" Foreground="Black"/>
                </Grid>
            </GroupBox>
        </Grid>

        <!-- Row 3: Settings (full width) -->
        <GroupBox Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2" Margin="0,0,0,10">
            <GroupBox.Header>
                <TextBlock FontWeight="Bold">Settings</TextBlock>
            </GroupBox.Header>
            <StackPanel Orientation="Horizontal" Margin="5">
                <CheckBox x:Name="chkPreview" Content="Show preview on hover" 
                        Margin="5" IsChecked="True"/>
                <CheckBox x:Name="chkAutoupdate" Content="Update UI on Events" 
                        Margin="5" IsChecked="True"/>
                <CheckBox x:Name="chkIncludeLinks" Content="Include Linked Levels and Grids" 
                        Margin="5" IsChecked="False"
                        Checked="chkIncludeLinks_checked" Unchecked="chkIncludeLinks_checked"/>
            </StackPanel>
        </GroupBox>
    </Grid>
</Window>